# -*- mode: sh -*-
# vim: set ft=sh:
function ___regenPowerlineLink(){

    local dir
    dir="$(sudo python3 -m pip show powerline-status | command grep --color=always '^Location' | awk '{print $2}')/powerline"
    if needSudo "$dir"; then
        prettyPrint "linking $dir to $TMUX_HOME/powerline with sudo"
        echo sudo ln -sfn "$dir" "$TMUX_HOME"
        (
            builtin cd "$HOME"
            sudo ln -sfn "$dir" "$TMUX_HOME"
        )
    else
        prettyPrint "linking $dir to $TMUX_HOME/powerline"
        echo ln -sfn "$dir" "$TMUX_HOME/powerline"
        (
            builtin cd "$HOME"
            ln -sfn "$dir" "$TMUX_HOME"
        )
    fi
    command tmux source-file "$HOME/.tmux.conf"
}

___regenPowerlineLink "$@"
